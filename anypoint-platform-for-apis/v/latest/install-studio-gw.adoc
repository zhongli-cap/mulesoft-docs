= Installing the API Gateway Runtime for Studio
:keywords: gateway, studio

To use Anypoint Studio to develop an API for deployment to Anypoint Platform, install and configure the API Gateway Runtime. Typically, for on-premises deployment of Mule applications, you install the link:https://www.mulesoft.com/ty/dl/api-gateway[standalone API Gateway] to host an API or proxy deployed to another runtime. For development in Studio, however, you install the API Gateway Runtime instead of the standalone API Gateway. The API Gateway Runtime is an eclipse plugin that you install from Anypoint Studio.  

To install an API Gateway Tooling Runtime:

. From the main menu bar in Anypoint Studio, select *Help > Install New Software*. 
. In the Work with: field in the Install wizard, select the following site from the drop-down:
+
`API Gateway Update Site - http://studio.mulesoft.org/r4/api-gateway/`
+
. Expand *API Gateway Tooling Runtimes*.
+
The versions available for downloading and installation appear. If you do not see the version you want, it might be installed already. Click the *What is already installed* link to check the installed software.
+
. Check one or more API Gateway Runtimes that you want to install. For example, check API Gateway Runtime 2.2.0.
+
image:gw-tooling-runtimes.png[gw-tooling-runtimes]
+
. Click *Next*.
. Follow the installation wizard to complete the remaining steps, and accept the license agreement.
. When prompted to restart Studio, click Yes.

A project named `api-gateway_<version>` appears in the Project Explorer.

== Configuring Studio to Use API Gateway Tooling Runtime

After installation, perform these configuration tasks:

* Configure the HTTP connector to use another port.
* Configure credentials for accessing Anypoint Platform from Studio.
* Select the effective API Gateway installation.

=== Configure the HTTP Connector Port

Both the Gateway and HTTP connector in Studio use port 8081 by default. To prevent conflicts, change the port number used by the HTTP component to another port, 8083 for example:

To configure the HTTP connector port:

. In Project Explorer, select `<application.name>.xml`.
. Select the *HTTP* connector in the flow. 
. In *General Settings*, select the edit icon to the right of the Green plus icon.
+
The Global Element Properties dialog appears.
+
. Change the *Port* to another port number, 8083 for example.
+
image:gw-cfg-port.png[gw-cfg-port]
+
. Click OK.

=== Configure Credentials

Obtain the credentials for accessing Anypoint Platform, and use them to configure Studio preferences.

. Log in to the Anypoint Platform as an administrator.
. Click the gear icon at the top-right, and then select the *Organization* tab. 
+
The client id and client secret appear.
. From the *Studio > Preferences* menu, select *Anypoint Studio > Anypoint Platform for API*.
image:gw-studio-preferences.png[gw-studio-preferences]
. In *Client Credentials*, enter the client ID and client secret.
. Click OK.

=== Select the Effective API Gateway Runtime Installation

Multiple API Gateway Runtimes can be installed for use in Studio. MuleSoft recommends that you keep API Gateway versions consistent between production and development environments. Custom policies do not support versioning. Check migration notes for the differences and potential points of failure if, for some reason, you want to use different API Gateway versions across environments. 

You select which version of Gateway Runtime is used for deployment as described in this procedure, which assumes that you installed API Gateway 2.2.0 and 1.3.2. 

To select an API Gateway Runtime version for use in Studio:

. In the Project Explorer, double-click the `mule-project.xml` file in the `api-gateway_<version>` project.
+
image:gw-mule-project.png[gw-mule-project]
+
. From the Server Runtime drop-down, select the API Gateway version you want Studio to use.