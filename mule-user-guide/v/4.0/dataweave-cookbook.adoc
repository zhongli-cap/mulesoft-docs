= DataWeaveÂ Cookbook
:keywords: studio, anypoint, transform, transformer, format, aggregate, rename, split, filter convert, xml, json, csv, pojo, java object, metadata, dataweave, data weave, datamapper, dwl, dfl, dw, output structure, input structure, map, mapping



This section links to examples that demonstrate common data extraction and transformation approaches.


[cols="2,5",options="header"]
|===
|Example | Description

|link:/mule-user-guide/v/4.0/dataweave-cookbook-extract-data[Extracting Data]
| Shows common selector expressions for extracting values from a data source, such as a Mule message.

| link:/mule-user-guide/v/4.0/dataweave-cookbook-perform-basic-transformation[Perform Basic Transformation] | Uses selectors to perform a basic format transformation. It does not use any functions.

| link:/mule-user-guide/v/4.0/dataweave-cookbook-map[Mapping Data]
| Uses `map` to reorganize fields in a JSON array. It uses `as` to coerce a String into a Number.

| link:/mule-user-guide/v/4.0/dataweave-cookbook-rename-keys[Renaming Keys]
| Renames some keys in a JSON object while retaining the names of all other keys in the output. Uses `mapObject`, `when`, `as`, and `and`.

| link:/mule-user-guide/v/4.0/dataweave-cookbook-output-a-field-when-present[Outputting a Field When Present]
| Uses `when` with `map` to determine whether to include a field in the output. You might use it to exclude fields that contain sensitive data.

| link:/mule-user-guide/v/4.0/dataweave-cookbook-format-according-to-type[Format According to Type]
| Uses `when` together with `is` to apply different string transformations to keys, depending on the type of each element in an object. It uses `mapObject` to go over both the keys and values of the payload.

| link:/mule-user-guide/v/4.0/dataweave-cookbook-regroup-fields[Regrouping Fields]
| Uses `groupBy`, `mapObject`, and `map` to reorganize JSON and XML fields.

////
| link:/mule-user-guide/v/4.0/dataweave-cookbook-pick-top-elements[Pick Top Elements]
| Uses `groupBy` and `map` to sort a list of candidates according to their score at a test, then it splits the array to select only the top candidates.
////

| link:/mule-user-guide/v/4.0/dataweave-cookbook-change-value-of-a-field[Changing the Value of a Field]
| Masks sensitive data by changing values of some keys to asterisks (\****). Uses `mapObject`, `unless`, and `otherwise`.


| link:/mule-user-guide/v/4.0/dataweave-cookbook-exclude-field[Excluding Fields from the Output]
| Shows how to exclude unwanted elements from the output. Uses the `-` (remove) and `mapObject` functions.

| link:/mule-user-guide/v/4.0/dataweave-cookbook-use-constant-directives[Use Constant Directives]
| Defines a series of constant strings and numbers in the header, these are used to filter input and to concatenate into URLs. Uses `map`, `when` and `++` to concatenate strings.


| link:/mule-user-guide/v/4.0/dataweave-cookbook-define-a-custom-addition-function[Define a Custom Addition Function]
| Defines a function that obtains totals and subtotals through the `accumulator` function. Also performs additions, subtractions and multiplications of numeric values.

| link:/mule-user-guide/v/4.0/dataweave-cookbook-define-function-to-flatten-list[Defining a Function that Flattens Data in a List]
| Uses `reduce`, `map`, `when`, and `splitBy` to modify and conditionally output fields from a list.


| link:/mule-user-guide/v/4.0/dataweave-cookbook-output-self-closing-xml-tags[Outputting self-closing XML tags]
| Uses `inlineCloseOn="empty"` to close empty tags (for example, `<element2/>`).

| link:/mule-user-guide/v/4.0/dataweave-cookbook-insert-attribute[Inserting an Attribute into an XML Tag]
| Uses the `@(key:value)` syntax to create an XML attribute.


| link:/mule-user-guide/v/4.0/dataweave-cookbook-remove-certain-xml-attributes[Remove Certain XML Attributes]
| Defines a function that recursively checks an element and all of its children for a specific attribute and removes it with `-`. It also uses `mapObject`, `when` and `is` (to match types).

////
| link:/mule-user-guide/v/4.0/dataweave-cookbook-include-xml-namespaces[Include XML Namespaces]
| Defines multiple XML namespaces and references these in each tag.
////

| link:/mule-user-guide/v/4.0/dataweave-cookbook-reference-multiple-inputs[Reference Multiple Inputs]
| References data on the payload, a variable and a property. It then processes these through `map`, `filter` and multiplications.

| link:/mule-user-guide/v/4.0/dataweave-cookbook-merge-multiple-payloads[Merge Multiple Payloads]
| Reference data that arrives in multiple separate payloads from one single Mule event. Filters the output based on a unique identifier. Uses `map`, `using`, `as`, and `filter` functions.


| link:/mule-user-guide/v/4.0/dataweave-cookbook-use-constant-directives[Using Constant Directives]
| Defines a `%var` in the DataWeave header that builds URLs from constant directives using `++` to concatenate strings.

| link:/mule-user-guide/v/4.0/dataweave-cookbook-parse-dates[Parsing Dates]
| Defines a function that normalizes conflicting date formats into a single, common format. Uses `mapObject`, `replace` and `as` to coerce a data type.

| link:/mule-user-guide/v/4.0/dataweave-cookbook-add-and-subtract-time[Adding and Subtracting Dates]
| Performs multiple math operations combining different types related to date and time.

| link:/mule-user-guide/v/4.0/dataweave-cookbook-conditional-list-reduction-via-function[Conditionally Reduce a List Via a Function]
| Defines a function that reduces a list of elements into one field. It then calls this function only when a certain field has values. Uses `map`, `reduce`, `splitBy`, `when` and `++` to append to an array.

| link:/mule-user-guide/v/4.0/dataweave-cookbook-map-based-on-an-external-definition[Dynamic Mapping Based On a Definition]
| Transforms the payload according to definitions sent in a variable. It defines a function that applies the logic defined in the variable, using `map` and `default`.

|  link:/mule-user-guide/v/4.0/dataweave-cookbook-pass-functions-as-arguments[Passing Functions as Arguments]
| Defines a function that expects to receive two inputs: a function to apply and an element to apply it on. The function is also recursively applied to the element's children. It uses `mapObject` `lower` `is` `when` `otherwise`.


|===

////
THESE DON'T WORK
|  link:/mule-user-guide/v/4.0/dataweave-configure-csv-reader[]

|  link:/mule-user-guide/v/4.0/dataweave-cookbook-create-mule-config[Creating a Mule Configuration]

|  link:/mule-user-guide/v/4.0/dataweave-cookbook-create-mule-pom[Creating a Mule POM]


////




== See Also

* To step through basic DataWeave use cases and exercises in actual Mule applications, see the link:/mule-user-guide/v/4.0/dataweave-quickstart[DataWeave Quickstart Guide].
* link:/mule-user-guide/v/4.0/mule-concepts[Mule Concepts]
