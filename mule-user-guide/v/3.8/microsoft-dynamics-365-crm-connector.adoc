= Microsoft Dynamics 365 CRM Connector
:keywords: microsoft, dynamics, 365, crm, connector, oauth

*Select*

*Latest version: 1.0.0*

The Microsoft Dynamics Customer Relationship Management (CRM) connector lets 
you access Microsoft Dynamics CRM’s SOAP Organization Service. You can add this connector to an Anypoint Studio flow.

*Release Notes*: link:[Microsoft Dynamics 365 CRM Connector Release Notes] +
*Technical Reference*: link:http://mulesoft.github.io/ms-dynamics-365-crm-connector[MS Dynamics 365 CRM Connector Technical Reference] +
*Samples*: link:_attachments/dynamics-365-crm-connector-samples.zip[dynamics-crm-365-connector-samples.zip]

== Prerequisites

Before starting, you need login credentials to a Microsoft Dynamics 365 CRM instance: user name, password, resource, endpoint, client ID, and client secret.

== To Install and Configure the Connector

. Download and install Java 8 (latest version) or Java 7 (deprecated by Oracle).
+
link:http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html[JDK 8 Download]
+
. Download the Java Cryptography Extensions (JCE) package before installing the connector.
+
Download JCE for Java 7 from link:http://www.oracle.com/technetwork/java/javase/downloads/jce-7-download-432124.html[Oracle's Java 7 JCE Download site].
+
Download JCE for Java 8 from link:http://www.oracle.com/technetwork/java/javase/downloads/jce8-download-2133166.html[Oracle's Java 8 JCE Download site].
+
. Unzip and copy the JCE local-policy.jar and US_export_policy.jar files to the $JAVA_HOME/jre/lib/security directory.
Replace existing files of the same names.
. Click the image:crm-365-exchange-icon.png[exchange-icon], search for 365, and follow the prompts to install the connector.

== To Create a New Mule Project Using Anypoint Studio Visual Editor

. In Anypoint Studio, click File > New > Mule Project.
. Specify a Project Name and click Finish.
. Search for "http" and drag the HTTP connector to the canvas. Click the green
plus sign next to Connector Configuration, and click OK in the menu to accept the default values.
. Search for "mic" and drag the Microsoft Dynamics 365 connector to the canvas. 
Click the green plus next to Connector Configuration, and specify your access credentials.
. Click a connection strategy for authentication:
+
** Microsoft Dynamics 365 OAuth Connection 
** Microsoft Dynamics 365 OAuth Username-Password

=== To Configure for OAuth Connection

. Click the green plus sign to the right of Connector Configuration.
. Provide the Client ID and Secret values.
. Choose the action for if no token is provided:
+
.. EXCEPTION (Default) - Cause an exception if there is no token.
.. STOP_FLOW - Stop running the Mule project if there is no token.

=== To Configure for OAuth Username-Password

. Click the green plus sign to the right of Connector Configuration.
. Provide the Client ID, Username, Paassword, Resource, Client Secret,
and Token Request Endpoint to enable access to your Microsoft Dynamics 365 server.
. Click Test Connection to ensure that your credentials are accepted at the server
endpoint.
. Click Enable DataSense to let your application acquire metadata from the server.

For information on setting the Pooling Profile tab, see link:/mule-user-guide/v/3.8/tuning-performance#about-pooling-profiles[About Pooling Profiles].

For information on setting the Reconnection tab, see link:/mule-user-guide/v/3.8/configuring-reconnection-strategies[Configuring Reconnection Strategies].

== To Run a Flow

. In Package Explorer, right click your project's name, and click *Run As* > *Mule Application*.
. Check the console to see when the application starts. You should see messages such as these if no errors occur:

[source,xml,linenums]
----
************************************************************
INFO  2017-05-14 22:12:42,003 [main] org.mule.module.launcher.DeploymentDirectoryWatcher: 
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
+ Mule is up and kicking (every 5000ms)                    +
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
INFO  2017-05-14 22:12:42,006 [main] org.mule.module.launcher.StartupSummaryDeploymentListener: 
**********************************************************
*  - - + DOMAIN + - -               * - - + STATUS + - - *
**********************************************************
* default                           * DEPLOYED           *
**********************************************************

************************************************************************
* - - + APPLICATION + - -   * - - + DOMAIN + - -  * - - + STATUS + - - *
************************************************************************
* myapp                     * default             * DEPLOYED           *
************************************************************************
----

== To Configure Connector Operations

* xref:authop[Authorize]
* xref:aunuthop[Unauthorize]
* xref:createop[Create]
* xref:createmultop[Create multiple]
* xref:delop[Delete]
* xref:delmultop[Delete multiple]
* xref:disop[Disassociate]
* xref:doactop[Do action]
* xref:invop[Invoke]
* xref:retop[Retrieve]
* xref:retmultop[Retrieve multiple]
* xref:retmultqop[Retrieve multiple by query]
* xref:upop[Update]
* xref:upmultop[Update multiple]


[[authop]]
=== To Authorize Access to the CRM Server

. Set Operation to Authorize.
. Specify a string to be sent with the callback from the authentication server.
. Provide the Access Token URL given to you by the service provider.
. Provide the Authorization URL given to you by the service provider. This URL indicates where the resource owner redirects to grant authorization to the connector.
. Provide the access token ID for authenticating the authorize call.
. Specify the Scope.
. Specify the Response_mode, which is the method that sends the token back to your app. Possible values are query or form_post.
. Specify the Resource (required).

[[unauthop]]
=== To Unauthorize Access from the CRM Server

. Set Operation to Unauthorize.
. Provide the Access Token URL that you used to authorize access to the CRM server.

[[createop]]
=== To Create an Entity

. Set Operation to Create.
. Specify the required Logical Name, which is the name of the schema in lowercase. 
. Define optional attributes for the default, from a MEL expression, or manually set attributes as one or more key and value Map pairs.

[[createmultop]]
=== To Create Multiple Entities

. Set Operation to Create Multiple.
. Specify the required Logical Name, which is the name of the schema in lowercase. 
. Click Use Single Transaction to indicate that if the transaction fails it is rolled back.
. Click image:crm-365-add-expression-icon.png[crm-add-expression-icon] to add a MEL expression for the Logical Name attribute.
. Define optional attributes from a MEL expression, or manually set attributes as one or more key and value Map pairs.

[[delop]]
=== To Delete an Entity

. Set Operation to Delete.
. Specify a MEL expression for the ID field.
. Specify a logical name (required).

[[delmultop]]
=== To Delete Multiple Entities

. Set Operation to Delete Multiple.
. Specify the  Logical Name (required), which is the name of the schema in lowercase. 
. Define optional attributes for the default, from a MEL expression, or manually set attributes as one or more key and value Map pairs.

[[disop]]
=== To Disassociate an Entity

. Set Operation to Disassociate.
. Specify the required Logical Name (required), which is the name of the schema in lowercase. 
. Define optional attributes for the default, from a MEL expression, or manually set attributes as one or more key and value Map pairs.

[[doactop]]
=== To Do an Action on an Entity

. Set Operation to Do Action.
. Specify the Action Name (required).
. Specify the Bounded Entity ID.
. Specify the Bounded Entity Type.
. Define optional attributes for the default, from a MEL expression, or manually set attributes as one or more key and value Map pairs.

[[invop]]
=== To Invoke an Entity

. Set Operation to Invoke.
. Specify a URI or MEL expression.
. Speciy an HTTP method (required): DELETE, GET, PATCH, POST, or PUT.
. Specify the request HTTP Headers from the expression or manually.
. Specify the JSON string value (required) that is placed in the body 
of the request.

[[retop]]
=== To Retrieve an Entity

. Set Operation to Retrieve.
. Specify a MEL expression for the ID field.
. Specify a logical name (required).

[[retmultop]]
=== To Retrieve Multiple Entities

. Set Operation to Retrieve Multiple.
. Specify the Data Query URL or MEL expression for what to retrieve.
. Specify the Paging Fetch Size in pages to retrieve. The default is 100 pages.

[[retmultqop]]
=== To Retrieve Multiple Entities by Query

. Set Operation to Retrieve Multiple By Query.
. Specify the query language.
. Configure the Query for what you want to retrieve. For more information 
on DataSense queuries, see link:/anypoint-studio/v/6/datasense-query-language[DataSense Query Language].
. Specify the Paging Fetch Size in pages to retrieve. The default is 100 pages.

[[upop]]
=== To Update an Entity

. Set Operation to Update.
. Specify the  Logical Name (required), which is the name of the schema in lowercase. 
. Define optional attributes for the default, from a MEL expression, or manually set attributes as one or more key and value Map pairs.

[[upmultop]]
=== To Update Multiple Entities

. Set Operation to Update.
. Specify the  Logical Name (required), which is the name of the schema in lowercase.
. Click Use Single Transaction to indicate that if the transaction fails it is rolled back.
. Click image:crm-365-add-expression-icon.png[crm-add-expression-icon] to add a MEL expression for the Logical Name attribute.
. Define optional attributes for the default or manually set attributes as one or more key and value Map pairs.

== Example: Microsoft Dynamics 365 CRM

This demo is going to demonstrate the use of Microsft Dynamics 365 for Operations Connector.

To build and run this demo project you need:

* Anypoint Studio with at least Mule 3.5 Runtime.
* Microsft Dynamics 365 for Operations Connector v1.0.0 or higher.
* Dynamics 365 for Operations (AX 7)

Components:

* `IMPORT_DATA_RECURRING_JOB_DEMO`: This flow imports data for a recurring job. An entitiy name, activity id and a file containg the data must be provided.

* [POST] The HTTP endpoint listens to the following URL: +
`+http://localhost:8081/import+`

* `RETRIEVE_MULTIPLE_BY_URL`: This flow retrieves multiple entities based on url request.

* [GET] The HTTP endpoint listens to the following URL: +
`+http://localhost:8081/retrieveCustomers+`

* `RETRIEVE_MULTIPLE_BY_DSQL`: This flow retrieves multiple entities based on Datasense Query Language.

* [GET] The HTTP endpoint listens to the following URL: +
`+http://localhost:8081/retrieveCustomersByQuery+`

* `APPLY_TIMEZONE`: This flow apply the timezone based on provided dateTime and timezoneOffset.

* [POST] The HTTP endpoint listens to the following URL: +
`+http://localhost:8081/applyTimezone+`

You can use the selection menu from `+http://localhost:8081+` to test the flows or you can POST JSONs using a tool like curl, or any other tool (Chrome/Mozilla Firefox extensions) that lets you POST a body when calling the URL.

=== To Test the Flow

. Import the demo project into your workspace via "Anypoint Exchange" or "Import..." from "File" menu.
. Specify your OAuth2 credentials for 'OAuth2 Username Password' Config in /src/main/app/mule-app.properties:
+
** `dynamics365.username` - Username used to initialize the session
** `dynamics365.password` - Password used to authenticate the user
** `dynamics365.resource` - The App ID URI of the web API (secured resource). It must be root URI, without specifing the CRM version ( Example : https://<your-org>.operations.dynamics.com/ )
** `dynamics365.clientId` - The Application Id assigned to your app when you registered it with Azure AD. You can find this in the Azure Portal. Click Active Directory, click the directory, choose the application, and click Configure.
** `dynamics365.clientSecret` - The Application Secret that you created in the app registration portal for your app. It should not be used in a native app, because client_secrets cannot be reliably stored on devices. It is required for web apps and web APIs, which have the ability to store the client_secret securely on the server side.
** `dynamics365.tokenRequestEndpoint` - The token endpoint that is called to get the access token. ( Example: https://login.windows.net/<tenant-id>/oauth2/token where 'tenant-id' is the Azure AD id )
+
. Specify 'DataSense Connection Timeout' with more than 200 seconds because the connector makes several requests to provide DataSense information.
. Run the project in Studio.
. Type `localhost:8081` in your browser to access the selection menu of the demo.
. Optionally you can configure the Connection Timeout and Read Timeout. 
The Connection Timeout is the timeout in making the initial connection with the server. 
The Read Timeout is the timeout on waiting to read data from the server.

=== Visual Editor Flow

image:crm-365-example-flow.png[ms-365-crm-example-flow]

=== XML Flow

[source,xml,linenums]
----
<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:dw="http://www.mulesoft.org/schema/mule/ee/dw" xmlns:json="http://www.mulesoft.org/schema/mule/json" xmlns:http="http://www.mulesoft.org/schema/mule/http" xmlns:dynamics365="http://www.mulesoft.org/schema/mule/dynamics365" xmlns:tracking="http://www.mulesoft.org/schema/mule/ee/tracking" xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
	xmlns:spring="http://www.springframework.org/schema/beans" 
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-current.xsd
http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd
http://www.mulesoft.org/schema/mule/dynamics365 http://www.mulesoft.org/schema/mule/dynamics365/current/mule-dynamics365.xsd
http://www.mulesoft.org/schema/mule/ee/tracking http://www.mulesoft.org/schema/mule/ee/tracking/current/mule-tracking-ee.xsd
http://www.mulesoft.org/schema/mule/ee/dw http://www.mulesoft.org/schema/mule/ee/dw/current/dw.xsd
http://www.mulesoft.org/schema/mule/json http://www.mulesoft.org/schema/mule/json/current/mule-json.xsd">
    <dynamics365:config-oauth-user-pass name="Microsoft_Dynamics_365__OAuth_2_0_Username_Password" clientId="${dynamics365.clientId}" username="${dynamics365.username}" password="${dynamics365.password}" resource="${dynamics365.resource}" clientSecret="${dynamics365.clientSecret}" tokenRequestEndpoint="${dynamics365.tokenRequestEndpoint}" doc:name="Microsoft Dynamics 365: OAuth 2.0 Username-Password"/>
    <http:listener-config name="HTTP_Listener_Configuration" host="0.0.0.0" port="8081" doc:name="HTTP Listener Configuration"/>
    <flow name="PARSE_DEMO_TEMPLATE">
        <http:listener config-ref="HTTP_Listener_Configuration" path="/" doc:name="HTTP"/>
        <parse-template location="form.html" doc:name="Parse Template"/>
        <set-property propertyName="content-type" value="text/html" encoding="US-ASCII" mimeType="text/html" doc:name="Property"/>
    </flow>
    <flow name="CREATE_EMPTY_CONTACT_DEMO">
        <http:listener config-ref="HTTP_Listener_Configuration" path="/createContact" doc:name="HTTP"/>
        <logger message="Requested 'Create Contact Operation'" level="INFO" doc:name="Logger"/>
        <dynamics365:create config-ref="Microsoft_Dynamics_365__OAuth_2_0_Username_Password" logicalName="contact" doc:name="Microsoft Dynamics 365"/>

        <logger message="Received Response from 'Create Contact Operation'" level="INFO" doc:name="Logger"/>
    </flow>
    <flow name="CREATE_EMPTY_OPPORTUNITY_DEMO">
        <http:listener config-ref="HTTP_Listener_Configuration" path="/createOpportunity" doc:name="HTTP"/>
        <logger message="Requested 'Create Opportunity Operation'" level="INFO" doc:name="Logger"/>
        <dynamics365:create config-ref="Microsoft_Dynamics_365__OAuth_2_0_Username_Password" logicalName="opportunity" doc:name="Microsoft Dynamics 365"/>
        <logger message="Received Response from 'Create Opportunity Operation'" level="INFO" doc:name="Logger"/>
    </flow>
    <flow name="CREATE_ACCOUNT_DEMO">
        <http:listener config-ref="HTTP_Listener_Configuration" path="/createAccount" doc:name="HTTP"/>
        <logger message="Requested 'Create Account Operation'" level="INFO" doc:name="Logger"/>
        <dw:transform-message doc:name="Transform Message">
            <dw:set-payload><![CDATA[%dw 1.0
%output application/java
---
{
	name: payload.AccountName,
	creditonhold: payload.CreditOnHold,
	creditlimit: payload.CreditLimit,
	"primarycontactid@odata.bind": "/contacts(" ++ payload.ContactID ++ ")"
}]]></dw:set-payload>
        </dw:transform-message>
        <dynamics365:create config-ref="Microsoft_Dynamics_365__OAuth_2_0_Username_Password" logicalName="account" doc:name="Microsoft Dynamics 365">
            <dynamics365:attributes ref="#[payload]"/>
        </dynamics365:create>
        <logger message="Received Response from 'Create Account Operation'" level="INFO" doc:name="Logger"/>
    </flow>
    <flow name="CREATE_MULTIPLE_ENTITIES_DEMO">
        <http:listener config-ref="HTTP_Listener_Configuration" path="/createMultipleAccounts" doc:name="HTTP"/>
        <logger message="Requested 'Create Multiple Accounts Operation'" level="INFO" doc:name="Logger"/>
        <dw:transform-message doc:name="Transform Message">
            <dw:set-payload><![CDATA[%dw 1.0
%input payload application/json
%output application/java
---
payload map {
      name: $.AccountName,
      creditlimit : $.CreditLimit,
      creditonhold : $.CreditOnHold
}]]></dw:set-payload>
        </dw:transform-message>
        <dynamics365:create-multiple config-ref="Microsoft_Dynamics_365__OAuth_2_0_Username_Password" logicalName="account" doc:name="Microsoft Dynamics 365">
            <dynamics365:attributes-list ref="#[payload]"/>
        </dynamics365:create-multiple>
        <logger message="Received Response from 'Create Multiple Entities Operation'" level="INFO" doc:name="Logger"/>
        <json:object-to-json-transformer doc:name="Object to JSON"/>
    </flow>
    <flow name="UPDATE_ENTITY_DEMO">
        <http:listener config-ref="HTTP_Listener_Configuration" path="/updateAccount" doc:name="HTTP"/>
        <logger message="Requested 'Update Entity Operation'" level="INFO" doc:name="Logger"/>
        <dw:transform-message doc:name="Transform Message">
            <dw:set-payload><![CDATA[%dw 1.0
%output application/java
---
{
	entityId: payload.EntityId,
	attributes: {
		creditlimit: payload.CreditLimit,
		name: payload.AccountName
	}
}]]></dw:set-payload>
        </dw:transform-message>
        <dynamics365:update config-ref="Microsoft_Dynamics_365__OAuth_2_0_Username_Password" logicalName="account" doc:name="Microsoft Dynamics 365">
            <dynamics365:attributes ref="#[payload]"/>
        </dynamics365:update>
        <logger message="'Update Entity Operation' has ended with success" level="INFO" doc:name="Logger"/>
        <json:object-to-json-transformer doc:name="Object to JSON"/>
    </flow>
    <flow name="UPDATE_MULTIPLE_ENTITIES_DEMO">
        <http:listener config-ref="HTTP_Listener_Configuration" path="/updateMultipleAccounts" doc:name="HTTP"/>
        <logger message="Requested 'Multiple Entities Operation'" level="INFO" doc:name="Logger"/>
        <dw:transform-message doc:name="Transform Message">
            <dw:set-payload><![CDATA[%dw 1.0
%input payload application/json
%output application/java
---
payload map {
	entityId: $.EntityId,
	attributes: {
		name: $.AccountName
	}
}]]></dw:set-payload>
        </dw:transform-message>
        <dynamics365:update-multiple config-ref="Microsoft_Dynamics_365__OAuth_2_0_Username_Password" logicalName="account" doc:name="Microsoft Dynamics 365">
            <dynamics365:attributes-list ref="#[payload]"/>
        </dynamics365:update-multiple>
        <logger message="Received Response from 'Update Multiple Entities Operation'" level="INFO" doc:name="Logger"/>
        <json:object-to-json-transformer doc:name="Object to JSON"/>
    </flow>
    <flow name="DELETE_ENTITY_DEMO">
        <http:listener config-ref="HTTP_Listener_Configuration" path="/deleteAccount" doc:name="HTTP"/>
        <logger message="Requested 'Delete Entitiy Operation'" level="INFO" doc:name="Logger"/>
        <dw:transform-message doc:name="Transform Message">
            <dw:set-payload><![CDATA[%dw 1.0
%output application/java
---
payload.EntityId]]></dw:set-payload>
        </dw:transform-message>
        <dynamics365:delete config-ref="Microsoft_Dynamics_365__OAuth_2_0_Username_Password" logicalName="account" doc:name="Microsoft Dynamics 365"/>
        <logger message="'Delete Entity Operation' has ended with success" level="INFO" doc:name="Logger"/>
    </flow>
    <flow name="RETRIEVE_ENTITY_DEMO">
        <http:listener config-ref="HTTP_Listener_Configuration" path="/retrieveAccount" doc:name="HTTP"/>
        <logger message="Requested 'Retrieve Entitiy Operation'" level="INFO" doc:name="Logger"/>
        <dw:transform-message doc:name="Transform Message">
            <dw:set-payload><![CDATA[%dw 1.0
%output application/java
---
payload.EntityId]]></dw:set-payload>
        </dw:transform-message>
        <dynamics365:retrieve config-ref="Microsoft_Dynamics_365__OAuth_2_0_Username_Password" logicalName="account" doc:name="Microsoft Dynamics 365"/>
        <logger message="Received Response from 'Retrieve Entitiy Operation'" level="INFO" doc:name="Logger"/>
        <json:object-to-json-transformer doc:name="Object to JSON"/>
    </flow>
    <flow name="RETRIEVE_ENTITIES_BY_URL_DEMO">
        <http:listener config-ref="HTTP_Listener_Configuration" path="/retrieveAccountsByURL" doc:name="HTTP"/>
        <logger message="Requested 'Retrieve Multiple Operation'" level="INFO" doc:name="Logger"/>
        <dynamics365:retrieve-multiple config-ref="Microsoft_Dynamics_365__OAuth_2_0_Username_Password" dataQueryURL="${dynamics365.resource}/api/data/v8.2/accounts?$select=name,accountnumber&amp;$top=3" doc:name="Microsoft Dynamics 365"/>

        <logger message="Received Response from 'Retrieve Multiple Operation'" level="INFO" doc:name="Logger"/>
        <json:object-to-json-transformer doc:name="Object to JSON"/>
    </flow>
    <flow name="RETRIEVE_ENTITIES_BY_QUERY_DEMO">
        <http:listener config-ref="HTTP_Listener_Configuration" path="/retrieveAccountsByQuery" doc:name="HTTP"/>
        <logger message="Requested 'Retrieve Multiple By Query Operation'" level="INFO" doc:name="Logger"/>
        <dynamics365:retrieve-multiple-by-query config-ref="Microsoft_Dynamics_365__OAuth_2_0_Username_Password" query="dsql:SELECT accountid,accountnumber,name FROM account LIMIT 2" doc:name="Microsoft Dynamics 365"/>

        <logger message="Received Response from 'Retrieve Multiple By Query Operation'" level="INFO" doc:name="Logger"/>
        <json:object-to-json-transformer doc:name="Object to JSON"/>
    </flow>
    <flow name="DISASSOCIATE_ENTITIES_DEMO">
        <http:listener config-ref="HTTP_Listener_Configuration" path="/disassociateEntities" doc:name="HTTP"/>
        <logger level="INFO" doc:name="Logger" message="Requested 'Dissasociate Entities Operation'"/>
        <dw:transform-message doc:name="Transform Message">
            <dw:set-payload><![CDATA[%dw 1.0
%output application/java
---
{
	entityId: payload.EntityId,
	attributes: payload.EntityLinkKeys
}]]></dw:set-payload>
        </dw:transform-message>
        <dynamics365:disassociate config-ref="Microsoft_Dynamics_365__OAuth_2_0_Username_Password" logicalName="account" doc:name="Microsoft Dynamics 365">
            <dynamics365:attributes ref="#[payload]"/>
        </dynamics365:disassociate>
        <logger level="INFO" doc:name="Logger" message="Finished 'Dissasociate Entities Operation' with success"/>
    </flow>
    <flow name="DO_ACTION_DEMO">
        <http:listener config-ref="HTTP_Listener_Configuration" path="/doAction" doc:name="HTTP"/>
        <logger message="Requested 'Do Action Operation'" level="INFO" doc:name="Logger"/>
        <dw:transform-message doc:name="Transform Message">
            <dw:set-payload><![CDATA[%dw 1.0
%output application/java
---
{
	OpportunityClose: {
		subject: payload.Subject,
		"opportunityid@odata.bind": "/opportunities(" ++ payload.OpportunityId ++ ")"
	},
	Status: payload.Status
}]]></dw:set-payload>
        </dw:transform-message>
        <dynamics365:do-action config-ref="Microsoft_Dynamics_365__OAuth_2_0_Username_Password" actionName="WinOpportunity" doc:name="Microsoft Dynamics 365"/>
        <logger message="Finished 'Do Action Operation'" level="INFO" doc:name="Logger"/>
    </flow>
</mule>

----

== See Also

* link:_attachments/[Demo Application attachment]
* link:
