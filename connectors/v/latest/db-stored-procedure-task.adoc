= To Call a Stored Procedure

In this procedure, you first create a stored procedure in your database using your database tools. Next, you connect a Mule app to the database, and finally, call the stored procedure from the Mule app. This procedure builds on the example that connects a Mule app to a database using the Classic Models sample database. 

. On a database server, create a stored procedure. For example, on a MySQL database server, run the following MySQL commands on the command line.
+
----
USE classicmodels;
DELIMITER //
CREATE PROCEDURE GetVehicles()
BEGIN
SELECT * FROM products;
END //
----
+
. Reset the delimiter to the default. For example:
+
`DELIMITER ;`
+
. Create a new project and in the new flow, add an HTTP Listener connector.
. Follow instructions to connect the app to a database except, in Select an Operation, select Stored Procedure.
. In SQL Query Text, enter: `Call GetAllProducts()` and close the connector.
. Capture the results of the query and format the results for readability.
+
* For example, add a logger to the flow.
* In General, type the following message: `payload.` and pause.
+
DataSense displays the database column names and other valid payloads.
+
* Select the name of a column, for example productLine.
* Accept the default JSON type.
. Click Run or Update.
. Select Running > Copy Link and go to the URL.
+
. View the log.
+
The product lines appear:
+
----
    "Motorcycles",
    "Classic Cars",
    "Motorcycles",
    "Classic Cars",
    "Trucks and Buses",
    ...
----

== See Also

* link:http://www.mysqltutorial.org/download/2[Classic Models database download]
* link:/connectors/http-trigger-app-from-browser[To Trigger an App from a Browser]
* link:/connectors/db-connect-database[To Connect a Database]

