= About Database Connector Migration
:keywords: database migration, mysql, oracle, derby, jdbc, postgres, ms sql, relational

Changes in the database connector for Mule Runtime 4.0 that can affect migration are:

* Simplified querying
* Changes to the Insert and Update operation return types
* Changes in the syntax related to template queries
* Improved bulk operations

== Simplified Querying

You no longer need to include the dynamic option in queries that include an expression. The database connector automatically evaluates expressions dynamically, and then you can add parameters to the query as an option. Parametrized query declarations in Mule 4.0 differ from declarations in previous releases. 

== Insert and Update Return Types

The Insert and Update operations now return a `StatementResult` object. This object contains the `map` and `int` values that previous releases returned in separate objects; consequently, you need to migrate payloads returned by these operations. 

////
== Template Query Changes

The syntax related to template queries has changed as follows:

[source,xml,linenums]
----
<db:template-query name="selectQuery">
  <db:parameterized-query>select * from Planet where name = :name</db:parameterized-query>
  <db:in-param name="name" defaultValue="#[payload]" type="VARCHAR"/>
</db:template-query>
<flow name="selectParameterizedQuery">
  <db:select config-ref="dbConfig">
    <db:template-query-ref name="selectQuery"/>
  </db:select>
</flow>
----

////

== Improved Bulk Operations

Insert, update and delete operation syntax no longer includes the `bulkMode` Boolean parameter. In Mule 4.0, you no longer need to build a collection payload and map parameters. Bulk insert, bulk update, and bulk delete are independent operations.

There is no longer a requirement to have a payload that an operation can iterate. Operations receive a `List<Map<String, Object>>` that contains the values and specifies the parameters through each map key set.

In Mule 4.0, the `bulk-execute` operation is now called `execute-script`.

== See Also

* link:/connectors/database-documentation[Database Connector Technical Reference]
* link:/connectors/db-dynamic-query-task[To Query Data Dynamically]
* link:/connectors/db-connector-dynamic-query-ref[Dynamic Query Reference]
* link:/connectors/db-connector-bulk-insert-task[To Insert Data in Bulk]
* link:/connectors/db-connector-bulk-ops-ref[Bulk Operations Reference]

