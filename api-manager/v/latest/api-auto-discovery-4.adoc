= About Auto-Discovery (Latest)

API auto-discovery is the mechanism to manage an API from API Manager by pairing the deployed application to an API created on the platform. You can use auto-discovery to register and start an API in API Manager without user intervention. Auto-discovery plays a key role in API governance through policies. Having a unique client ID and client secret for an API is critical to the auto-discovery process. In API Manager, an API can have multiple environments and you can have multiple API instances in the same environment. Unlike the auto-discovery process in the classic API Manager, which uses the business group client ID and client secret, auto-discovery uses environment-based credentials. The API instances can belong to the same business group, so using business-group credentials do not uniquely identify an instance. To connect to an organization in Anypoint Platform from Mule Runtime, you need to provide the client id and client secret of the organizationâ€™s environment where the API is registered in API Manager. 

image::env-clientid.png[]

These credentials identify the instance that API Manager governs according to applied policies. You obtain these credentials from the API administration dashboard in API Manager. 

In the UI, the auto-discovery credentials appear as follows:

----
name="groupID:{{groupID}}:assetId:{{assetId}}"
version="{{version}}:{{instanceId}}"
----

image::autodiscovery-on-dashboard.png[]

You use these credentials to identify the API in the proxy application XML and Runtime Manager property settings. In the application, you can configure the credentials in the wrapper.conf. In Runtime Manager, you provide the credentials in the property settings using the following names:

* anypoint.platform.client_id
* anypoint.platform.client_secret

The auto-discovery element is not supported in Studio 7.0. You need to manually add the element to your Studio 7 applications.

== Using Auto-Discovery in Mule 4

In a Mule 4 app, to identify an API you need to provide its apiId and a reference to the APIs main flow. The main flow is where the HTTP listener is defined. The syntax for specifying the apiId is:

`<api-gateway:autodiscovery apiId="${api.id}" flowRef="proxy" />`

The apiId in Mule 4 replaces the API Name and API Version, which was required for API Gateway to create an API in API Manager. Mule 4 does not support creation of an API in API Manager. Mule 4 supports tracking an API that resides in Exchange using API Manager. 


== See Also

* link:/api-manager/get-auto-discovery-task[To Obtain Auto-Discovery Credentials]
* Studio 7 example application showing auto-discovery configuration


